<!DOCTYPE html>
<html>

<head>
  <title>Taco Recipes</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="/styles/main.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=REM:wght@500&display=swap" rel="stylesheet">
</head>

<body>
  <div class="d-flex justify-content-center heading">
    <h1 class="px-3 py-3 rounded-5">Taco Town 🌮</h1>
  </div>
  <form action="/recipe" method="POST" class="buttons">
    <button type="submit" value="chicken" name="choice">🍗</button>
    <button type="submit" value="beef" name="choice">🥩</button>
    <button type="submit" value="fish" name="choice">🐟</button>
  </form>
  <div class="d-flex justify-content-center">
    <div id="recipeContainer" class="hidden py-5 px-5 rounded-5 mx-4">

      <!-- If no recipe yet, show: -->
      
      <!-- Else, show the recipe name e.g. <h2>Recipe name</h2>-->
      <% if(locals.choice){ %>
          <h2 id="ingredientsList"><%= choice %> taco</h2>
        <% }else{ %>
          <h2 id="ingredientsList">Pick your favourite taco ingredient 👆</h2>
          <% } %>
        <h3 class="bg-color">Ingredients: </h3>
        <% if(locals.choice){ %>
            <% if(choice === "chicken"){ %>
              <ul id="ingredientsList">
                <li><%= data[0].ingredients.protein.name%>, <%=data[0].ingredients.protein.preparation%></li>
                <li><%= data[0].ingredients.salsa.name%></li>
                <% for(let i = 0; i < 4; i++){ %>
                  <li><%= data[0].ingredients.toppings[i].quantity%> of <%= data[0].ingredients.toppings[i].quantity%></li>
                  <% } %>
              </ul>
              <% } %>
              <% if(choice === "beef"){ %>
                <ul id="ingredientsList">
                  <li><%= data[1].ingredients.protein.name%>, <%=data[1].ingredients.protein.preparation%></li>
                  <li><%= data[1].ingredients.salsa.name%></li>
                  <% for(let i = 0; i < 3; i++){ %>
                    <li><%= data[1].ingredients.toppings[i].quantity%> of <%= data[1].ingredients.toppings[i].quantity%></li>
                    <% } %>
                </ul>
                <% } %>
                <% if(choice === "fish"){ %>
                  <ul id="ingredientsList">
                    <li><%= data[2].ingredients.protein.name%>, <%=data[2].ingredients.protein.preparation%></li>
                    <li><%= data[2].ingredients.salsa.name%></li>
                    <% for(let i = 0; i < 3; i++){ %>
                      <li><%= data[2].ingredients.toppings[i].quantity%> of <%= data[2].ingredients.toppings[i].quantity%></li>
                      <% } %>
                  </ul>
                  <% } %>
          <% }else { %>
            <ul id="ingredientsList">
              <li>Protein name, protein preparation</li>
              <li>Salsa name</li>
              <li>Every other topping</li>
            </ul>
            <% } %>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</body>

</html>